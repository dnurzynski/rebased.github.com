var serializeFormJSON=function(e){var t=new Date;return{fullname:e.querySelector("input[name='fullname']").value,email:e.querySelector("input[name='email']").value,id:t.getTime(),created_at:t.toString()}},sendToFirebase=function(e){return new Promise(function(t,n){var s={apiKey:"AIzaSyDrg6aEURLreoVQeaoRGskTJ0FKlpESRCc",authDomain:"web-lab-b363f.firebaseapp.com",databaseURL:"https://web-lab-b363f.firebaseio.com",storageBucket:"form_submissions.appspot.com"};firebase.initializeApp(s),firebase.database().ref("submissions/").push(e,t())})},sendToSheetsu=function(e){return new Promise(function(t,n){var s=new XMLHttpRequest;s.open("POST","https://sheetsu.com/apis/v1.0/fee30730abea"),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){s.status>=200&&s.status<400?t(s.response):n(s.statusText)},s.onerror=function(){n(s.statusText)},s.send(JSON.stringify(e))})},sendForm=function(e){e.preventDefault();var t=this.querySelector("button");t.disabled=!0,t.innerHTML="saving...";var n=serializeFormJSON(this),s=this;Promise.all([sendToSheetsu(n),sendToFirebase(n)]).then(function(){s.reset(),t.innerHTML="Thanks, we'll contact you soon!",t.classList.add("after-submit")}).catch(function(e){console.log(e),t.innerHTML="send",t.disabled=!1})};document.getElementById("contact-form-top").addEventListener("submit",sendForm),document.getElementById("contact-form-bottom").addEventListener("submit",sendForm);
